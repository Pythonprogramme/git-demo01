{#    引入basic公共模板#}
{% extends 'basic/layout/basic_base_page.html' %}
{% block title %} 人员职位  {% endblock %}
{# 添加当前页面的css#}
{% block css %} {% endblock %}
{# 添加面包屑导航名称#}
{% block breadcrumb %}
    人员职位
 {% endblock %}
{# 添加当前页面的内容#}
{% block content %}
{#    基本信息#}
    <table class="layui-hide" id="tableArea"></table>
{#  表格中的按钮#}
    <script type="text/html" id="tableButton">
      <a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="edit">
          <i class="layui-icon layui-icon-edit"></i> 编辑
      </a>
      <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">
          <i class="layui-icon layui-icon-delete"></i> 删除
      </a>
    </script>
{% endblock %}
{# 添加当前页面的js#}
{% block js %}
    <script>
        // 入口函数
        $(function (){
            // 初始化表格
            initTable();
        })
        // 初始化表格
        function initTable(){
            // 使用 table 插件
            layui.use('table',function (){
                // 实例化一个表格对象
                let table =layui.table;
                // 开始渲染表格
                table.render({
                    elem: '#tableArea'
                    // 请求数据后台接口
                    ,url: "{% url 'list_position' %}"
                    // 不同行背景不同显示
                    ,even: true // 表格斑马线效果
                    ,cols: [[
                        {type:'numbers', width:60, align: 'center', title: '编号', sort: true}
                        ,{field:'company__name', width:280,align: 'center', title: '部门名称',sort: true}
                        ,{field:'name', title: '职位名称', align: 'center',sort: true}
                        ,{fixed: 'right', title: '操作',width:'20%', align:'center', toolbar: '#tableButton'}
                    ]]
                    // **是否显示顶部工具栏 （可直接导出）
                    ,toolbar: true
                    // 分页显示
                    ,page: true
                    /* 指定数据显示条数
                    * limit: 12
                    * limits: [12,15,20,30,50,75,100]
                    * */
                    // 加载数据异常时的提示
                    ,text: '加载数据出现异常，请联系管理员！'
                    // 表头样式显示
                    ,done: function (res, current, count){
                        $('thead tr').css({'background-color': '#009688','color': 'white'})
                    }
                })
            })
        }
    </script>

{% endblock %}